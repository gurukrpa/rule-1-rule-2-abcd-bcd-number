<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Rule-2 to Planets Analysis Data Transfer</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
        .section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #e8f5e8; border-color: #4caf50; }
        .error { background-color: #fce8e8; border-color: #f44336; }
        .info { background-color: #e8f4fd; border-color: #2196f3; }
        .debug { background-color: #fff3e0; border-color: #ff9800; }
        pre { background: #f5f5f5; padding: 10px; border-radius: 3px; overflow-x: auto; }
        button { padding: 10px 20px; margin: 5px; cursor: pointer; }
        .test-button { background: #4caf50; color: white; border: none; border-radius: 3px; }
        .test-button:hover { background: #45a049; }
    </style>
</head>
<body>
    <h1>🔧 Rule-2 to Planets Analysis Data Transfer Test</h1>
    
    <div class="section info">
        <h2>📋 Test Instructions</h2>
        <ol>
            <li>Open the main application at <a href="http://localhost:5173" target="_blank">localhost:5173</a></li>
            <li>Navigate to any user's data</li>
            <li>Click on a date that's 5th or later chronologically</li>
            <li>Click the "Rule-2" button to go to Rule2CompactPage</li>
            <li>Look for the "🪐 Planets Analysis" button at the bottom</li>
            <li>Click it and monitor the browser console for debug messages</li>
        </ol>
    </div>

    <div class="section debug">
        <h2>🔍 Expected Debug Messages</h2>
        <h3>From Rule2CompactPage (when clicking Planets Analysis button):</h3>
        <pre>
🔍 [Rule2→Planets] Raw topicResults: [array of topic results]
🔍 [Rule2→Planets] Analysis info: {analysis object}
🚀 [Rule2→Planets] Prepared analysisData: {prepared data}
🚀 [Rule2→Planets] Topic Numbers mapping: {topic mapping object}
🎯 [Rule2→Planets D-1 Set-1] Key: "D-1 Set-1 Matrix"
🎯 [Rule2→Planets D-1 Set-1] Data: {abcd: [...], bcd: [...]}
🎯 [Rule2→Planets D-1 Set-1] ABCD: [correct numbers]
🎯 [Rule2→Planets D-1 Set-1] BCD: [correct numbers]
🔍 [Rule2→Planets D-1 Set-1] Original topicResult: {original data}
🔍 [Rule2→Planets D-1 Set-1] Original ABCD: [correct numbers]
🔍 [Rule2→Planets D-1 Set-1] Original BCD: [correct numbers]
🌐 [Rule2→Planets] Navigating with URL param
        </pre>
        
        <h3>From PlanetsAnalysisPage (when receiving data):</h3>
        <pre>
📡 [PlanetsAnalysis] Received analysis data from URL: {parsed data}
📡 [PlanetsAnalysis] Topic numbers mapping: {topic mapping}
✅ [PlanetsAnalysis] ABCD/BCD data loaded from URL params
🔍 [DEBUG D-1 Set-1] analysisData: {analysis data}
🔍 [DEBUG D-1 Set-1] analysisData.success: true
🔍 [DEBUG D-1 Set-1] topicNumbers object: {topic numbers}
🔍 [DEBUG D-1 Set-1] all topic keys: [array of topic names]
🎯 [D-1 Set-1 SUCCESS] Found numbers: {abcd: [...], bcd: [...]}
🎯 [D-1 Set-1 SUCCESS] ABCD: [correct numbers]
🎯 [D-1 Set-1 SUCCESS] BCD: [correct numbers]
        </pre>
    </div>

    <div class="section error">
        <h2>❌ Potential Error Scenarios</h2>
        <h3>If you see these messages, there's a problem:</h3>
        <pre>
❌ [Rule2→Planets D-1 Set-1] NOT FOUND in topicNumbers!
❌ [D-1 Set-1 MISSING] No ABCD/BCD found for D-1 Set-1 Matrix
❌ [D-1 Set-1 NO DATA] No analysisData available
❌ [PlanetsAnalysis] Failed to parse analysis data from URL
        </pre>
    </div>

    <div class="section success">
        <h2>✅ Expected Results</h2>
        <p><strong>Rule-2 Page Display:</strong> Should show "D-1 Set-1 Matrix: ABCD Numbers: 1,2,4,7,9 / BCD Numbers: 5"</p>
        <p><strong>Planets Analysis Page Display:</strong> Should show the same numbers "D-1 Set-1: ABCD Numbers: 1,2,4,7,9 / BCD Numbers: 5"</p>
        <p><strong>If they don't match:</strong> There's a data transfer issue that needs debugging</p>
    </div>

    <div class="section info">
        <h2>🛠️ Debug Tools</h2>
        <p>Open browser Developer Tools (F12) and check the Console tab for all debug messages.</p>
        <p>If you see different numbers between Rule-2 and Planets Analysis, copy all the debug messages and share them for analysis.</p>
    </div>

    <div class="section">
        <h2>🚀 Quick Test Buttons</h2>
        <button class="test-button" onclick="openApp()">Open Application</button>
        <button class="test-button" onclick="openConsole()">Open Developer Console Guide</button>
    </div>

    <script>
        function openApp() {
            window.open('http://localhost:5173', '_blank');
        }
        
        function openConsole() {
            alert('Press F12 (or Cmd+Option+I on Mac) to open Developer Tools, then click the "Console" tab to see debug messages.');
        }
        
        // Auto-open the application for convenience
        setTimeout(() => {
            console.log('🔧 Test page loaded. Opening application...');
            openApp();
        }, 1000);
    </script>
</body>
</html>
